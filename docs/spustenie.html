<!DOCTYPE html>
<html lang="sk-SK">
<head>
	<!-- Primary Meta Tags -->
	<title>Spustenie projektu - WiFi termostat - ESP8266 / ESP32</title>
	<meta name="description" content="Návod na inštaláciu a spustenie projektu WiFi termostat postavenom na WiFi platforme ESP8266 a ESP32.">
	<meta name="keywords" content="Termostat, digitálny, arduino ide, wemos d1 mini, nodemcu, wifi, esp8266, vykurovanie, kúrenie, webserver, socket, http, web, ip, ipv4, ds18b20, onewire, 1-wire">
	<!-- Open Graph / Facebook -->
	<meta property="og:type" content="website">
	<meta property="og:url" content="https://martinius96.github.io/WiFi-termostat/spustenie.html">
	<meta property="og:title" content="Spustenie projektu - WiFi termostat - ESP8266 / ESP32">
	<meta property="og:description" content="Návod na inštaláciu a spustenie projektu WiFi termostat postavenom na WiFi platforme ESP8266 a ESP32.">
	<meta property="og:image" content="">

	<!-- Twitter -->
	<meta property="twitter:card" content="summary_large_image">
	<meta property="twitter:url" content="https://martinius96.github.io/WiFi-termostat/spustenie.html">
	<meta property="twitter:title" content="Spustenie projektu - WiFi termostat - ESP8266 / ESP32">
	<meta property="twitter:description" content="Návod na inštaláciu a spustenie projektu WiFi termostat postavenom na WiFi platforme ESP8266 a ESP32.">
	<meta property="twitter:image" content="">
	
	<link rel="icon" type="image/png" href="favicon.png">
	<link rel="sitemap" type="application/xml" title="Sitemap" href="sitemap.xml" />
	<meta name="google-site-verification" content="UwZZh2EXv3iWUAi_1Z0hLxVCz6ySJ4UdY_BPoLtejwo" />    	
	<meta property='fb:admins' content='100001242570317'>
    	<meta charset="utf-8">
    	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
	<script type="text/javascript">
    		window.smartlook||(function(d) {
    			var o=smartlook=function(){ o.api.push(arguments)},h=d.getElementsByTagName('head')[0];
    			var c=d.createElement('script');o.api=new Array();c.async=true;c.type='text/javascript';
    			c.charset='utf-8';c.src='https://rec.smartlook.com/recorder.js';h.appendChild(c);
    		})(document);
    		smartlook('init', 'db50efe9fff280a17db52b82be221240cbbd3dbe');
	</script>  
	<style>
	table td {
  border: 1px solid black;
}	table th {
  border: 1px solid black;
}
	#right {
  position: absolute;
  right: 0px;
}
	</style>
</head>
<body>
	<div class="container">
  		<div class="row">
    			<div class="col-sm-12">
<nav class="navbar navbar-inverse">
  <div class="container-fluid">
    <div class="navbar-header">
      <a class="navbar-brand" href="index.html">WiFi termostat</a>
    </div>
    <ul class="nav navbar-nav">
      	<li class=""><a href="index.html">Prehľad</a></li>
	<li><a href="zapojenie.html">Zapojenie</a></li>      
	<li class="active"><a href="spustenie.html">Spustenie WiFi termostatu</a></li>
  <li><a href="json_client.html">JSON client</a></li>
      	<li><a href="kontakt.html">Kontakt</a></li>
<li style="float: right; "><a href="https://martinius96.github.io/termostat-ethernet/" class="btn btn-danger" role="button" title="Zmeniť projekt na Ethernet termostat"><img src="https://www.flaticon.com/svg/static/icons/svg/908/908547.svg" width=16px height=16px> <font color="white">Ethernet termostat</font></a></li>  </ul>
  </div>
</nav>  
				<div class="alert alert-success">
					<strong>Projekt k repozitáru - Github: </strong><a href="https://github.com/martinius96/WiFi-termostat">WiFi termostat</a>
				</div>	
<span class="label label-default">ESP8266</span>
<span class="label label-primary">ESP32</span>
<span class="label label-success">WiFi</span>
<span class="label label-info">DS18B20</span>
<span class="label label-warning">OneWire</span>
<span class="label label-danger">Dallas</span>
<span class="label label-default">HTML</span>
<span class="label label-primary">Webserver</span>
<span class="label label-success">WebSocket</span>
<span class="label label-info">JSON</span>
<span class="label label-warning">mDNS</span>	
<span class="label label-danger">UART</span>				
<hr><center><h2>Spustenie projektu WiFi termostat - ESP8266 / ESP32</h2></center><hr>
<p style="text-align: justify;">
Projekt WiFi termostat existuje existuje vo viacerých verziách, ktoré sú dostupné na Githube v repozitári celého projektu.
Verzie sa funkčnosťou líšia iba v rozšírených možnostiach použitia a možnosti vzdialenej aktualizácie firmvéru.
Firmvér je dostupný v skompilovanom - binárnom tvare, ktorý je spustiteľný pre cieľovú platformu.
Tým pádom je vopred vyskúšaný, skompilovaný pre vás. Firmvér je univerzálny, čo zaručuje, že bude fungovať s klonovaným - binárnym programom na všetkých mikrokontroléroch rovnako.
<div class="alert alert-danger">
	<b>Free verzia je tak dostupná iba vo forme skompilovaného - binárneho programu bez prístupu k aplikácii napísanej v .ino formáte.</b>
</div>	
</p>
<hr><center><h2>Rozdelenie firmvéru na základe podporovaných WiFi platforiem</h2></center><hr>
<li><b>ESP8266</b> - cieľová platforma s čipom ESP8266 vo verzii 12E až 12F (podmienené flash metódou DIO)</li>
<li><b>ESP32</b> - cieľová platforma s čipom ESP-32S (AI-Thinker), ESP-WROOM32 (Espressif Systems)</li>
<hr><center><h2>Rozdelenie firmvéru na základe funkcie</h2></center><hr>
			<center>
<div class="table-responsive">   
<table class="table" style="border: 1px solid black;">
<thead>
<tr>
<th>Názov zložky firmvéru</th>
<th>Funkcie firmvéru</th>
</tr>
</thead>
<tbody>
<tr>
<td>WiFi_TERMOSTAT</td>
<td>Projekt termostatu. Možnosť nastavovať a riadiť v automatickom režime vykurovanie v domácnosti</td>
</tr>
<tr>
<td>WiFi_TERMOSTAT_mDNS</td>
<td>Projekt termostatu. Možnosť nastavovať a riadiť v automatickom režime vykurovanie v domácnosti. mDNS záznam pre možnosť spustenia termostatu na lokálnej doméne v rámci LAN siete</td>
</tr>
<tr>
<td>WiFi_TERMOSTAT_OTA</td>
<td>Projekt termostatu. Možnosť nastavovať a riadiť v automatickom režime vykurovanie v domácnosti. mDNS záznam pre možnosť spustenia termostatu na lokálnej doméne v rámci LAN siete s možnosťou aktualizácie firmvéru prostredníctvom Web OTA Updater služby.</td>
</tr>
</tbody>
</table>
	</div></center>
<p style="text-align: justify;">
Pre nahratie binárneho programu do platformy ESP je potrebné použiť nástroj ESPTOOL.
Nástroj využíva napríklad aj prostredie Arduino IDE pre nahratie programu po kompilácii, alebo aj vývojový framework od Espressif Systems - ESP-IDF.
<b>Pri platforme ESP32 je potrebné do začiatku procesu nahrávania držať tlačidlo BOOT, respektíve urobiť pulldown na GPIO 0 (ak doska nemá BOOT tlačidlo vyvedené).</b>
V priečinku každého firmvéru je pripravený automatizovaný - spustiteľný .bat script (vzorovo pre port COM7), ktorý spustí priložený ESPTOOL a vykoná nahratie programu s konkrétnym firmvérom, ktorý sa v danej zložke nachádza.
Cieľový port je nutné pozmeniť na základe COM portu, na ktorom sa prihlási vaša doska / mikrokontróler.
Programová implementácia predpokladá, že má doska nahraté základné časti flash pamäte - tabuľka partícii a podobne...
Binárny program je výlučne aplikáciou termostatu bez ďalších pribalených častí programu.
Po nahratí programu sa okno programu ESPTOOL automaticky vypne a vykoná softvérový reštart ESP platformy, ktorá následne bootuje nový firmvér a pripravuje WiFi termostat na použitie.
</p>				
<center>
	<img src="https://i.imgur.com/Nz4Uryz.png" style="display: block; max-width: 100%; height: auto;" alt="XLoader - Arduino - AVRDUDE - Termostat - Ethernet" title="XLoader - Arduino - AVRDUDE - Termostat - Ethernet">	
</center>
<b>Po úspešnom nahratí binárneho je termostat plne pripravený.</b> 
<p style="text-align: justify;">
V prípade, že v jeho flash pamäti nie sú uložené údaje k existujúcej WiFi sieti, začne vysielať vlastné SSID - <b>WiFi_TERMOSTAT_AP</b>. 
Po pripojení smartfónom / počítačom do tejto WiFi siete je na adrese <b>192.168.4.1</b> dostupné webové rozhranie WiFi Manager, ktoré poskytuje možnosť konfigurácie WiFi termostatu pre vašu domácu WiFi sieť.
V rozhraní je možné zadať meno a heslo existujúcej WiFi siete, na ktorú sa WiFi termostat pripojí. 
<div class="alert alert-danger">
<strong>Funkcia termostatu je spustená až po pripojení ESP mikrokontroléru do vašej LAN siete! Po pridelení IP adresy pre konektivitu vo vašej sieti.</strong>
</div>	
Po pripojení na domácu WiFi sieť ESP prestáva vysielať SSID, prepne sa do STA (Station) módu a funguje už v režime termostatu
Zadané údaje o WiFi sieti sú uložené do flash pamäte termostatu a už ich nie je nutné zadávať znova pri opätovnom spustení termostatu, výpadku napájania, reštartu zariadenia.
V prípade, že daná sieť nie je dostupná, začne ESP opäť vysielať vlastné SSID: <b>WiFi_TERMOSTAT_AP</b> a opätovne je možné zadať prihlasovacie informácie.
Termostat je dostupný na svojej IP adrese (ktorú vypíše každých 10 sekúnd aj na UART), respektíve aj na lokálnom mDNS --> <b>http://WiFi-termostat.local</b>. Služba mDNS funguje až po pripojení k existujúcej WiFi sieti.
V momente, kedy termostat vysiela vlastné SSID, nie je možné na zariadenie pristúpiť cez doménové meno. 
Program funguje na základe schémy zapojenia projektu a logiky z popisu.</b>
		</p>
<center>
	<img src="https://i.imgur.com/cJb6DR9.png" style="display: block; max-width: 100%; height: auto;" alt="ESP - WiFi termostat - vysielanie SSID pre konfiguráciu na existujúcu WiFi sieť" title="ESP - WiFi termostat - vysielanie SSID pre konfiguráciu na existujúcu WiFi sieť">	
	<img src="https://i.imgur.com/M3dqgf5.png" style="display: block; max-width: 100%; height: auto;" alt="WiFi termostat - WiFi Manager - konfigurácia existujúcej WLAN siete" title="WiFi termostat - WiFi Manager - konfigurácia existujúcej WLAN siete">
	<img src="https://i.imgur.com/nxVXgWU.png" style="display: block; max-width: 100%; height: auto;" alt="Fungujúci WiFi termostat na IP adrese v lokálnej WiFi sieti" title="Fungujúci WiFi termostat na IP adrese v lokálnej WiFi sieti">
	<img src="https://i.imgur.com/f1mF6Fk.png" style="display: block; max-width: 100%; height: auto;" alt="ESP - WiFi termostat - UART výpis - logika systému - ovládanie kotla, pridelená IP adresa v domácej LAN sieti" title="ESP - WiFi termostat - UART výpis - logika systému - ovládanie kotla, pridelená IP adresa v domácej LAN sieti">
</center>
	<hr>
	</div>
		</div>
</div>
</body>
</html>
